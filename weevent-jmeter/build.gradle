dependencies {
    compile project(path: ":weevent-client")
    // https://mvnrepository.com/artifact/org.apache.jmeter/ApacheJMeter_java
    compile("org.apache.jmeter:ApacheJMeter_java:5.0")
    // https://mvnrepository.com/artifact/org.apache.jmeter/ApacheJMeter_core
    compile("org.apache.jmeter:ApacheJMeter_core:5.0")
    // json rpc
    compile("com.github.briandilley.jsonrpc4j:jsonrpc4j:1.5.3")
    // jms
    compile("javax.jms:jms:1.1")
    // stomp
    compile("org.java-websocket:Java-WebSocket:1.4.0")
    compile("org.springframework:spring-messaging:5.1.6.RELEASE")
}

jar {
    destinationDir file("dist/apps")
    archiveName project.name + "-" + version + ".jar"

    exclude "**/*.xml"
    exclude "**/*.properties"

    doLast {
        copy {
            from file("src/main/resources/")
            into "dist/conf"
        }
        copy {
            from(configurations.runtime)
            include("weevent-client*.jar", "jsonrpc4j-*.jar",
                    "Java-WebSocket-*.jar", "spring-messaging-*.jar",
                    "spring-core-*.jar"
            )
            into "dist/apps"
        }
        copy {
            from file("build/libs/")
            into "dist/apps"
        }
    }
}


artifacts {
    archives jar
}